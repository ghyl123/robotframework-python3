*** Settings ***
Test Template     Date Conversion Should Succeed
Library           DateTime
Variables         datesandtimes.py

*** Test Cases ***    INPUT                                           OUTPUT                     INPUT FORMAT
String inputs         2014-04-24 21:45:12.123                         2014-04-24 21:45:12.123
                      2014-04-24 21:45:12                             2014-04-24 21:45:12.000
                      2014-04-24T21:45:12.123                         2014-04-24 21:45:12.123
                      2014.04+24@@21/45!12,123                        2014-04-24 21:45:12.123

Formatted strings     2014-04-24 21:45:12.123                         2014-04-24 21:45:12.123    %Y-%m-%d %H:%M:%S.%f
                      2014-04-24T21:45:12.123                         2014-04-24 21:45:12.123    %Y-%m-%dT%H:%M:%S.%f
                      24.4.2014 21:45:12-123                          2014-04-24 21:45:12.123    %d.%m.%Y %H:%M:%S-%f
                      04/24/2014T21.45.12                             2014-04-24 21:45:12.000    %m/%d/%YT%H.%M.%S
                      24.04.2014                                      2014-04-24 00:00:00.000    %d.%m.%Y
                      24-04.2014@21                                   2014-04-24 21:00:00.000    %d-%m.%Y@%H

Epoch                 ${1398365112.0}                                 2014-04-24 21:45:12.000
                      ${1398365112.123}                               2014-04-24 21:45:12.123

Datetime object       ${datetime(2014, 4, 24, 21, 45, 12, 123000)}    2014-04-24 21:45:12.123
                      ${datetime(2014, 4, 24, 21)}                    2014-04-24 21:00:00.000

Pad zeroes to missing values
                      2014-04-24                                      2014-04-24 00:00:00.000
                      2014.04.24 21                                   2014-04-24 21:00:00.000

Rounding milliseconds
                      2014-04-24 21:45:12.123456                      2014-04-24 21:45:12.123
                      2014-04-24 21:45:12.1234                        2014-04-24 21:45:12.123
                      2014-04-24 21:45:12.1235                        2014-04-24 21:45:12.124
                      2014-04-24T21:45:12.123456                      2014-04-24 21:45:12.123    %Y-%m-%dT%H:%M:%S.%f
                      2014-04-24T21:45:12.1234                        2014-04-24 21:45:12.123    %Y-%m-%dT%H:%M:%S.%f
                      2014-04-24T21:45:12.1235                        2014-04-24 21:45:12.124    %Y-%m-%dT%H:%M:%S.%f
                      ${1398365112.123456}                            2014-04-24 21:45:12.123
                      ${1398365112.1234}                              2014-04-24 21:45:12.123
                      ${1398365112.1235}                              2014-04-24 21:45:12.124
                      ${datetime(2014, 4, 24, 21, 45, 12, 123456)}    2014-04-24 21:45:12.123
                      ${datetime(2014, 4, 24, 21, 45, 12, 123400)}    2014-04-24 21:45:12.123
                      ${datetime(2014, 4, 24, 21, 45, 12, 123500)}    2014-04-24 21:45:12.124

Formatted with %f in middle
    [Template]     NONE
    Run Keyword If    sys.version_info < (2, 6) or sys.platform == 'cli'
    ...   Run Keyword And Expect Error    ValueError: %f directive is supported only at the end of the format string on this Python interpreter.
    ...   Date Conversion Should Succeed    21:45:12.123 24.04.2014    2014-04-24 21:45:12.123    %H:%M:%S.%f %d.%m.%Y
    ...   ELSE
    ...   Date Conversion Should Succeed    21:45:12.123 24.04.2014    2014-04-24 21:45:12.123    %H:%M:%S.%f %d.%m.%Y

Invalid input format
    [Documentation]    FAIL ValueError: Unsupported input 'None'.
    [Template]    NONE
    Convert Date    ${NONE}

*** Keywords ***
Date Conversion Should Succeed
    [Arguments]    ${input}    ${expected}    ${input_format}=${NONE}
    ${ts} =    Convert Date    ${input}    date_format=${input_format}
    Should Be Equal    ${ts}    ${expected}
